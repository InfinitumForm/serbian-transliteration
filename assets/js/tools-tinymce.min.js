!function(t,n){var i=null;function a(t,i,a){return n.ajax({type:"POST",url:RSTR_TOOL.ajax,data:{action:"rstr_transliteration_letters",mode:t,nonce:RSTR_TOOL.nonce,value:i,rstr_skip:!0}}).done(function(t){var n;a((n=t,n.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(n)})))})}t.create("tinymce.plugins.transliteration_plugin",{init:function(t,n){t.addButton("transliterate_to_latin",{text:RSTR_TOOL.label.Latin,icon:!1,onclick:function(){var n=this,e=t.getContent({format:"text"});n.disabled(!0),i&&i.abort(),i=a("cyr_to_lat",e,function(i){t.setContent(i),n.disabled(!1)}).fail(function(){n.disabled(!1)})}}),t.addButton("transliterate_to_cyrillic",{text:RSTR_TOOL.label.Cyrillic,icon:!1,onclick:function(){var n=this,e=t.getContent({format:"text"});n.disabled(!0),i&&i.abort(),i=a("lat_to_cyr",e,function(i){t.setContent(i),n.disabled(!1)}).fail(function(){n.disabled(!1)})}})}}),t.PluginManager.add("transliteration_plugin",t.plugins.transliteration_plugin)}(tinymce,jQuery);